# 后台管理系统使用指南

## 📋 目录

- [访问后台](#访问后台)
- [管理功能](#管理功能)
- [常见问题](#常见问题)
- [故障排查](#故障排查)

---

## 🔐 访问后台

### 方式1：通过登录页面（推荐）

1. 访问 `/auth` 页面
2. 使用管理员账号登录
   - 默认用户名：`admin`
   - 默认密码：`admin123`
3. 登录后，点击用户菜单 → 后台管理

### 方式2：直接访问后台登录页面

1. 访问 `/admin-login` 页面
2. 输入管理员账号密码
3. 点击登录

### 方式3：已登录用户

如果您已经是登录用户（并且是管理员角色）：

1. 点击右上角用户菜单
2. 选择"后台管理"

---

## 🎯 管理功能

### 1. 后台主页 (`/admin`)

**功能概览**：
- ✅ 快速访问所有管理功能
- ✅ 查看数据统计
- ✅ 最近活动记录
- ✅ 系统诊断入口

**包含的管理模块**：
- 用户管理
- 产品管理（选型系统）
- 进销存管理
- 内容管理
- 版本管理
- 系统设置

---

### 2. 用户管理 (`/admin/dashboard`)

**功能**：
- 查看用户列表
- 搜索和过滤用户
- 升级用户等级
- 激活/停用用户
- 查看用户订阅状态
- 数据统计

**访问路径**：
```
后台主页 → 用户管理
```

**常见问题**：

#### ❌ 问题：页面无法显示，提示"未登录"或"需要管理员权限"

**原因**：
- 未登录或登录已过期
- 当前用户不是管理员

**解决方案**：
1. 重新登录：`/auth`
2. 使用管理员账号登录
3. 确认用户角色为 `admin`

#### ❌ 问题：用户列表为空

**可能原因**：
- 数据库中确实没有用户
- API调用失败

**解决方案**：
1. 检查控制台错误信息
2. 运行系统诊断：`/diagnostic`
3. 检查数据库连接

#### ❌ 问题：数据统计显示异常

**可能原因**：
- 数据库查询失败
- 权限问题

**解决方案**：
1. 刷新页面
2. 重新登录
3. 运行系统诊断

---

### 3. 产品管理/选型系统 (`/admin/products`)

**功能**：
- 查看产品列表
- 添加新产品
- 编辑产品信息
- 删除产品
- 上传产品图片
- 配置性能曲线
- 搜索和过滤产品

**访问路径**：
```
后台主页 → 产品管理
```

**常见问题**：

#### ❌ 问题：产品列表无法显示

**可能原因**：
- API调用失败
- 数据库连接问题
- 权限不足

**解决方案**：
1. 检查控制台错误信息
2. 运行系统诊断：`/diagnostic`
3. 确认管理员权限

#### ❌ 问题：无法添加/编辑产品

**可能原因**：
- 权限不足
- 数据格式错误

**解决方案**：
1. 确认是管理员登录
2. 检查输入数据格式
3. 查看控制台错误

#### ❌ 问题：图片上传失败

**可能原因**：
- 文件过大
- 格式不支持
- 对象存储未配置

**解决方案**：
1. 压缩图片（建议 < 2MB）
2. 使用支持的格式（JPG, PNG）
3. 配置对象存储服务

---

## 🔧 故障排查

### 步骤1：运行系统诊断

访问：`/diagnostic`

系统诊断会检查：
- ✅ 应用服务状态
- ✅ 数据库连接状态
- ✅ 环境变量配置
- ✅ 系统资源使用

### 步骤2：检查浏览器控制台

1. 按 `F12` 打开开发者工具
2. 查看 Console 标签页
3. 查看错误信息

常见错误：
```
❌ 401 Unauthorized → 需要登录
❌ 403 Forbidden → 需要管理员权限
❌ 500 Internal Server Error → 服务器错误
```

### 步骤3：检查网络请求

1. 打开开发者工具
2. 切换到 Network 标签页
3. 刷新页面
4. 查看 API 请求状态

### 步骤4：检查权限

确认当前登录用户：
1. 访问 `/auth` 页面
2. 查看用户信息
3. 确认角色为 `admin`

---

## 🆘 常见问题

### Q1: 为什么看不到后台管理菜单？

**A**: 可能的原因：
1. 未登录
2. 当前用户不是管理员
3. 登录已过期

**解决方法**：
1. 重新登录：`/auth`
2. 使用管理员账号（`admin` / `admin123`）
3. 检查用户角色设置

---

### Q2: 用户管理页面显示"需要管理员权限"？

**A**:
1. 确认当前登录用户是管理员
2. 检查用户角色设置
3. 重新登录

**查看用户角色的方法**：
```sql
-- 查询用户角色
SELECT id, email, name, role FROM users WHERE email = 'your@email.com';
```

---

### Q3: 产品管理页面无法加载？

**A**:
1. 检查网络连接
2. 运行系统诊断：`/diagnostic`
3. 检查浏览器控制台错误
4. 确认管理员权限

---

### Q4: 数据统计显示不正确？

**A**:
1. 刷新页面
2. 检查数据库连接
3. 运行系统诊断

---

## 📊 后台管理功能列表

| 功能 | 路径 | 说明 | 权限 |
|------|------|------|------|
| **后台主页** | `/admin` | 快速访问所有管理功能 | admin |
| **用户管理** | `/admin/dashboard` | 管理用户和订阅 | admin |
| **产品管理** | `/admin/products` | 管理产品库和选型 | admin/manager |
| **进销存管理** | `/admin/inventory` | 库存、采购、销售 | admin/manager |
| **内容管理** | `/admin/content` | 图片、页面、文本 | admin/manager |
| **版本管理** | `/versions` | 代码备份和回滚 | admin |
| **在线编辑** | `/editor` | 在线代码编辑 | admin |
| **系统设置** | `/admin/settings` | 系统参数配置 | admin |
| **系统诊断** | `/diagnostic` | 系统状态检查 | 所有用户 |

---

## 🎨 界面说明

### 后台主页布局

```
┌─────────────────────────────────────┐
│  欢迎回来，管理员                    │
│  今天也是充满活力的一天！            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  管理功能                           │
├─────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│  │用户管理 │ │产品管理 │ │进销存   │ │
│  └─────────┘ └─────────┘ └─────────┘ │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│  │内容管理 │ │版本管理 │ │系统设置 │ │
│  └─────────┘ └─────────┘ └─────────┘ │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  数据概览                           │
├─────────────────────────────────────┤
│  产品总数: 156  用户总数: 2,456      │
│  选型次数: 1,234  访问量: 8,542     │
└─────────────────────────────────────┘
```

---

## 🔐 权限说明

### 管理员权限（admin）
- ✅ 所有管理功能
- ✅ 用户管理
- ✅ 产品管理
- ✅ 进销存管理
- ✅ 内容管理
- ✅ 版本管理
- ✅ 系统设置

### 经理权限（manager）
- ✅ 产品管理
- ✅ 进销存管理
- ✅ 内容管理
- ❌ 用户管理
- ❌ 版本管理
- ❌ 系统设置

### 普通用户（user）
- ✅ 系统诊断
- ❌ 所有管理功能

---

## 📞 获取帮助

如果遇到问题：

1. **查看系统诊断**：访问 `/diagnostic`
2. **查看控制台错误**：按 `F12`
3. **重新登录**：访问 `/auth`
4. **联系管理员**

---

## ✅ 使用检查清单

访问后台前检查：
- [ ] 已登录账号
- [ ] 账号角色为 admin 或 manager
- [ ] 网络连接正常

访问后台功能时检查：
- [ ] 页面能正常加载
- [ ] 能看到数据列表
- [ ] 能进行操作（添加、编辑、删除）

遇到问题时检查：
- [ ] 查看浏览器控制台错误
- [ ] 运行系统诊断
- [ ] 检查网络请求状态
- [ ] 确认用户权限

---

**后台管理系统使用指南版本**：v1.0
**最后更新**：2026-02-08

# 🗄️ 腾讯云 PostgreSQL 配置指南

## 🎯 为什么使用腾讯云 PostgreSQL？

### 优势

✅ **开箱即用**：无需安装配置，3-10 分钟即可使用
✅ **高可用**：自动故障转移，数据更安全
✅ **自动备份**：定期自动备份，防止数据丢失
✅ **弹性扩展**：一键扩容，性能无忧
✅ **专业维护**：腾讯云专业团队维护，省心省力
✅ **安全可靠**：内置安全防护，数据加密存储

### 对比自建

| 项目 | 自建 PostgreSQL | 腾讯云 PostgreSQL |
|------|---------------|------------------|
| 安装时间 | 30-60 分钟 | 10-15 分钟 |
| 维护成本 | 高 | 低 |
| 可靠性 | 依赖服务器 | 高可用 |
| 备份 | 手动 | 自动 |
| 扩展性 | 困难 | 一键扩展 |
| 安全性 | 需自己配置 | 内置安全 |

---

## 🚀 配置步骤

### 第 1 步：登录腾讯云控制台

访问：https://console.cloud.tencent.com/postgres

### 第 2 步：创建 PostgreSQL 实例

1. 点击 **新建实例**
2. 选择配置：
   - 计费模式：按量计费或包年包月
   - 地域：广州（推荐）
   - 版本：PostgreSQL 14 或 15
   - 规格：2核4GB（起步）
   - 存储：100GB
3. 设置管理员密码
4. 点击 **立即购买**

### 第 3 步：创建数据库

1. 进入实例管理页面
2. 点击 **数据库管理** → **创建数据库**
3. 填写信息：
   - 数据库名：`lovato_pump`
   - 字符集：UTF-8

### 第 4 步：创建账号

1. 点击 **账号管理** → **创建账号**
2. 填写信息：
   - 账号名：`lovato_user`
   - 主机：`%`（允许所有 IP）
   - 密码：设置强密码
3. 设置权限：
   - 数据库：`lovato_pump`
   - 权限：所有者（Owner）

### 第 5 步：获取连接信息

1. 进入 **连接管理** 标签
2. 开启外网地址
3. 记录以下信息：
   - 外网地址
   - 外网端口（5432）

### 第 6 步：在 Vercel 中配置环境变量

1. 访问 https://vercel.com/dashboard
2. 选择项目：`luowato-pump-selection-system`
3. 进入 **Settings** → **Environment Variables**
4. 添加：
   ```
   Name: DATABASE_URL
   Value: postgresql://lovato_user:密码@外网地址:5432/lovato_pump
   Environment: All
   ```
5. 点击 **Save**
6. 点击 **Redeploy**

---

## 🔗 连接字符串格式

### 标准格式

```
postgresql://用户名:密码@主机:端口/数据库名
```

### 示例

```
postgresql://lovato_user:your_password@your_postgres_address.tencentpg.com:5432/lovato_pump
```

---

## 🧪 测试连接

### 使用 psql

```bash
psql -h 外网地址 -p 5432 -U lovato_user -d lovato_pump
```

### 使用 pgAdmin

1. 新建服务器连接
2. 填入连接信息
3. 测试连接

---

## 💰 成本估算

### 按量计费

- **2核4GB**：约 ¥0.5-1/小时
- **100GB 存储**：约 ¥0.3-0.5/GB/月

**月成本估算：**
- 实例：¥360-720/月
- 存储：¥30-50/月
- **总计：¥390-770/月**

### 包年包月

**更优惠！通常按量计费的 60-70%**

---

## 📋 配置清单

- [ ] 登录腾讯云控制台
- [ ] 创建 PostgreSQL 实例
- [ ] 创建数据库 `lovato_pump`
- [ ] 创建账号 `lovato_user`
- [ ] 开启外网地址
- [ ] 获取连接信息
- [ ] 在 Vercel 中配置 `DATABASE_URL`
- [ ] 重新部署
- [ ] 测试连接

---

## 🔧 常见问题

### Q1：为什么无法连接？

**检查项：**
1. 外网地址是否开启
2. 安全组是否允许 5432 端口
3. 账号权限是否正确
4. 密码是否正确

### Q2：连接超时怎么办？

**解决方案：**
- 检查网络连接
- 配置安全组规则
- 添加正确的 IP 白名单

### Q3：如何备份数据？

腾讯云 PostgreSQL 会自动备份，也可以手动备份：
1. 进入实例管理
2. 点击 **备份管理**
3. 点击 **创建备份**

---

## 🎉 完成后

配置完成后：
1. 数据库连接正常
2. 所有功能可用
3. 数据安全可靠
4. 自动备份保障

**推荐使用腾讯云 PostgreSQL！** 🚀

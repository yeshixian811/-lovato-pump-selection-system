<!-- äº§å“åº“é¡µé¢ -->

<view class="page-container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input
      class="search-input"
      placeholder="æœç´¢äº§å“å‹å·ã€åç§°"
      value="{{keyword}}"
      bindinput="onSearchInput"
    />
    <text class="search-icon">ğŸ”</text>
  </view>

  <!-- ç­›é€‰å’Œæ’åº -->
  <view class="filter-bar">
    <picker mode="selector" range="{{seriesList}}" bindchange="onSeriesFilter">
      <view class="filter-item">
        <text class="filter-text">{{filterSeries || 'å…¨éƒ¨ç³»åˆ—'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
    </picker>
    <picker
      mode="selector"
      range="{{['é»˜è®¤æ’åº', 'æŒ‰æµé‡', 'æŒ‰æ‰¬ç¨‹', 'æŒ‰åŠŸç‡']}}"
      bindchange="onSortChange"
    >
      <view class="filter-item">
        <text class="filter-text">æ’åº</text>
        <text class="filter-arrow">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- äº§å“åˆ—è¡¨ -->
  <view class="products-list" wx:if="{{!loading}}">
    <view
      class="product-card"
      wx:for="{{getFilteredProducts()}}"
      wx:key="id"
      bindtap="onProductDetail"
      data-id="{{item.id}}"
    >
      <view class="card-header">
        <view class="model">{{item.model}}</view>
        <view class="badge {{item.in_stock ? 'in-stock' : 'out-stock'}}">
          {{item.in_stock ? 'æœ‰è´§' : 'ç¼ºè´§'}}
        </view>
      </view>
      <view class="card-body">
        <view class="name">{{item.name}}</view>
        <view class="specs">
          <view class="spec">
            <text class="spec-label">æµé‡:</text>
            <text class="spec-value">{{item.max_flow_rate}} mÂ³/h</text>
          </view>
          <view class="spec">
            <text class="spec-label">æ‰¬ç¨‹:</text>
            <text class="spec-value">{{item.max_head}} m</text>
          </view>
          <view class="spec">
            <text class="spec-label">åŠŸç‡:</text>
            <text class="spec-value">{{item.rated_power}} kW</text>
          </view>
        </view>
      </view>
      <view class="card-footer">
        <text class="view-btn">æŸ¥çœ‹è¯¦æƒ… â€º</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && getFilteredProducts().length === 0}}">
    <text class="empty-icon">ğŸ“¦</text>
    <text class="empty-text">æš‚æ— äº§å“</text>
  </view>
</view>

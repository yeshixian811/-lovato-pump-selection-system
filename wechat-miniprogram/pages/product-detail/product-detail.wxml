<!-- äº§å“è¯¦æƒ…é¡µé¢ -->

<scroll-view class="page-container" scroll-y="{{true}}" wx:if="{{!loading}}">
  <!-- äº§å“å¤´éƒ¨ -->
  <view class="product-header">
    <view class="header-badge">{{product.series}}</view>
    <view class="header-model">{{product.model}}</view>
    <view class="header-name">{{product.name}}</view>
    <view class="header-desc">{{product.description}}</view>
  </view>

  <!-- ä¸»è¦å‚æ•°å¡ç‰‡ -->
  <view class="card">
    <view class="card-title">ä¸»è¦å‚æ•°</view>
    <view class="specs-grid">
      <view class="spec-item">
        <text class="spec-label">æµé‡</text>
        <text class="spec-value">{{product.max_flow_rate}} mÂ³/h</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">æ‰¬ç¨‹</text>
        <text class="spec-value">{{product.max_head}} m</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">åŠŸç‡</text>
        <text class="spec-value">{{product.rated_power}} kW</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">æ•ˆç‡</text>
        <text class="spec-value">{{product.efficiency}}%</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">è½¬é€Ÿ</text>
        <text class="spec-value">{{product.rated_speed}} r/min</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">ç”µå‹</text>
        <text class="spec-value">{{product.voltage}}</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">è¿›å£ç›´å¾„</text>
        <text class="spec-value">{{product.inlet_diameter}} mm</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">å‡ºå£ç›´å¾„</text>
        <text class="spec-value">{{product.outlet_diameter}} mm</text>
      </view>
    </view>
  </view>

  <!-- æ€§èƒ½æ›²çº¿å›¾è¡¨ï¼ˆæœ€å…³é”®åŠŸèƒ½ï¼‰ -->
  <view class="card" wx:if="{{product.performance_curve && product.performance_curve.length > 0}}">
    <view class="card-title">æ€§èƒ½æ›²çº¿</view>
    <view class="curve-section">
      <!-- ç”±äºå¾®ä¿¡å°ç¨‹åºé™åˆ¶ï¼Œè¿™é‡Œä½¿ç”¨ç®€åŒ–çš„æ›²çº¿å±•ç¤º -->
      <view class="curve-legend">
        <view class="legend-item">
          <view class="legend-line head-line"></view>
          <text class="legend-text">æ‰¬ç¨‹ (m)</text>
        </view>
        <view class="legend-item">
          <view class="legend-line efficiency-line"></view>
          <text class="legend-text">æ•ˆç‡ (%)</text>
        </view>
        <view class="legend-item">
          <view class="legend-line power-line"></view>
          <text class="legend-text">åŠŸç‡ (kW)</text>
        </view>
      </view>

      <!-- ç®€åŒ–çš„æ›²çº¿æ•°æ®è¡¨ -->
      <view class="curve-data">
        <view class="curve-header">
          <text class="data-cell">æµé‡</text>
          <text class="data-cell">æ‰¬ç¨‹</text>
          <text class="data-cell">æ•ˆç‡</text>
          <text class="data-cell">åŠŸç‡</text>
        </view>
        <view class="curve-row" wx:for="{{product.performance_curve}}" wx:key="flowRate">
          <text class="data-cell">{{item.flowRate}}</text>
          <text class="data-cell">{{item.head}}</text>
          <text class="data-cell">{{item.efficiency}}</text>
          <text class="data-cell">{{item.power}}</text>
        </view>
      </view>

      <!-- éœ€æ±‚ç‚¹æ ‡è®° -->
      <view class="requirement-point" wx:if="{{requiredFlow > 0 && requiredHead > 0}}">
        <view class="requirement-label">æ‚¨çš„éœ€æ±‚</view>
        <view class="requirement-values">
          <view class="req-item">
            <text class="req-label">éœ€æ±‚æµé‡:</text>
            <text class="req-value">{{requiredFlow}} mÂ³/h</text>
          </view>
          <view class="req-item">
            <text class="req-label">éœ€æ±‚æ‰¬ç¨‹:</text>
            <text class="req-value">{{requiredHead}} m</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†å‚æ•° -->
  <view class="card">
    <view class="card-title">è¯¦ç»†å‚æ•°</view>
    <view class="detail-list">
      <view class="detail-item">
        <text class="detail-label">é¢å®šç”µæµ</text>
        <text class="detail-value">{{product.current}} A</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">åŠŸç‡å› æ•°</text>
        <text class="detail-value">{{product.power_factor}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">é¢‘ç‡</text>
        <text class="detail-value">{{product.frequency}} Hz</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">é‡é‡</text>
        <text class="detail-value">{{product.weight}} kg</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">å¤–å½¢å°ºå¯¸</text>
        <text class="detail-value">{{product.dimensions}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">æ³µä½“ææ–™</text>
        <text class="detail-value">{{product.casing_material}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">å¶è½®ææ–™</text>
        <text class="detail-value">{{product.impeller_material}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">å¯†å°å½¢å¼</text>
        <text class="detail-value">{{product.seal_type}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">é˜²æŠ¤ç­‰çº§</text>
        <text class="detail-value">{{product.protection_level}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">ç»ç¼˜ç­‰çº§</text>
        <text class="detail-value">{{product.insulation_class}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">æœ€é«˜æ¸©åº¦</text>
        <text class="detail-value">{{product.max_temperature}} Â°C</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">æœ€ä½æ¸©åº¦</text>
        <text class="detail-value">{{product.min_temperature}} Â°C</text>
      </view>
    </view>
  </view>

  <!-- åº”ç”¨åœºæ™¯ -->
  <view class="card">
    <view class="card-title">åº”ç”¨åœºæ™¯</view>
    <view class="tags-container">
      <view class="tag" wx:for="{{product.applications}}" wx:key="*this">
        {{item}}
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn btn-outline" bindtap="onToggleFavorite">
      {{isFavorite ? 'â¤ï¸ å·²æ”¶è—' : 'ğŸ¤ æ”¶è—'}}
    </button>
    <button class="btn btn-primary" bindtap="onContact">è”ç³»å®¢æœ</button>
  </view>

  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <view class="footer-info">
    <view class="footer-item" bindtap="onDownloadSpec">
      <text class="footer-icon">ğŸ“„</text>
      <text class="footer-text">ä¸‹è½½è§„æ ¼ä¹¦</text>
    </view>
    <view class="footer-item" bindtap="onShareAppMessage">
      <button class="share-btn" open-type="share">
        <text class="footer-icon">ğŸ“¤</text>
        <text class="footer-text">åˆ†äº«ç»™æœ‹å‹</text>
      </button>
    </view>
  </view>
</scroll-view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <view class="loading-spinner"></view>
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>
